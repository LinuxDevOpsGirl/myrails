<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMX Movie Database</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>


  <body>
    <header>
      <%= render 'layouts/navigation' %>
    </header>
    <!-- only for preview version, remove for live -->
    <% if has_role? :guest %>
      <%= form_for @user_session do |f| %>
        <% if @user_session.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@user_session.errors.count, "error") %> prohibited:</h2>
          <ul>
            <% @user_session.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
        <% end %>
          <%= f.label :username %><br />
          <%= f.text_field :username %><br />
          <br />
          <%= f.label :password %><br />
          <%= f.password_field :password %><br />
          <br />
          <%= f.submit "Login" %>
      <% end %>
    <% end %>

    <% if (has_role? :author) || (has_role? :admin) %>
    <main role="main">
       <%= yield %>
    </main>
    <% end %>
  </body>
</html>

